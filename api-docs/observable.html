<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCPN Partial API docs: wxWidgets Observable Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenCPN Partial API docs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('observable.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">wxWidgets <a class="el" href="classObservable.html" title="The observable notify/listen basic nuts and bolts.">Observable</a> Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This is a basic notify-listen framework on top of wxWidgets. It requires C++11 and wxWidgets 3.0+.</p>
<p>Library is thread-safe in the sense that Notify() can be invoked from asynchronous worker threads. However, actual work performed by Listen() must be done in the main thread.</p>
<p>The listening mechanism makes it possible for a listener to receive an event on certain condtions. The event is based on wxCommandEvent and can thus optionally carry a string, a number and/or a pointer to the listening side. It has been extended to also be able to carry a <code>shared_ptr&lt;void&gt;</code> which basically makes it possible to transfer any shared_ptr from the notifying side to the listeners.</p>
<p>There are three out of the box use cases:</p>
<ul>
<li>The <a class="el" href="classEventVar.html" title="Generic event handling between MVC Model and Controller based on a shared EventVar variable.">EventVar</a> mechanism depends on a variable which is visible on both the listener and notifying side. It is described in the <em><a class="el" href="observable__evtvar_8h_source.html">observable_evtvar.h</a></em> header.</li>
<li>The <a class="el" href="classConfigVar.html" title="Wrapper for configuration variables which lives in a wxBaseConfig object.">ConfigVar</a> mechanism allows for listening to configuraion variable changes, and to notify about such changes. It is described in the <em><a class="el" href="observable__confvar_8h_source.html">observable_confvar.h</a></em> header</li>
<li>The <a class="el" href="classGlobalVar.html" title="Wrapper for global variable, supports notification events when value changes.">GlobalVar</a> variable mechanism (sic!) allows for listening to global variable changes and to notify about such changes. It is described in the <em><a class="el" href="observable__globvar_8h_source.html">observable_globvar.h</a></em> header.</li>
</ul>
<p>The framework is developed in the opencpn project [1].</p>
<h1><a class="anchor" id="Why"></a>
Why</h1>
<p>The basic event handling in wxWidgets has some limitations which this framework addresses:</p>
<ul>
<li>The party generating an event needs to know which window to send it to. This is problematic for example when low level code needs to generate an event and send it to a GUI which it really should not be aware of. Framework handles this using the classic observable pattern.</li>
<li>If a GUI starts listening to some event it means that other parties start sending events to a window id. This fails if the listening window goes out of scope. Framework handles this using listeners which does the right thing when they go out of scope.</li>
<li>In a message context, listening is the same as receiving messages. In many cases this means that several parties needs to receive a single message, something best sorted out using <code>std::shared_ptr</code>. Framework supports this by using a new event type which can carry also a <code>std::shared_ptr</code>.</li>
</ul>
<h1><a class="anchor" id="Extending"></a>
Extending</h1>
<p>The framework can be extended to handle other types. The basic condition is that anything which should use Listen() and Notify() should implement the <a class="el" href="classKeyProvider.html" title="Interface implemented by classes which listens.">KeyProvider</a> interface. This is just the ability to return a unique, stable key.</p>
<p>Stated otherwise, the key used when invoking Listen() should be the same as when doing Notify(). Examples includes:</p>
<ul>
<li>The event variable described above uses an auto generated random key, this works since both sides knows about the same event variable.</li>
<li>The config variable uses a key derived from the configuration value name. This works since both sides knows the name (path) of the configuration variable.</li>
</ul>
<p>In the OpenCPN project the framework is extended to handle messages. Each message implements the <a class="el" href="classKeyProvider.html" title="Interface implemented by classes which listens.">KeyProvider</a> interface which generates a key based on the message "type". This makes it possible to listen for specific message types as well as notifying when such a message is received.</p>
<h1><a class="anchor" id="Copyright"></a>
Copyright</h1>
<p>This work is copyright (c) Alec Leamas 2021-2022. It is distributed under the GPL licence, version 2 or later. See the source files for details.</p>
<p>[1] <a href="https://github.com/opencpn/OpenCPN">https://github.com/opencpn/OpenCPN</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
